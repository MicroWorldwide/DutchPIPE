<table border="0" cellpadding="0" cellspacing="0" style="width: 98%">
  <tr valign="top">
    <td class="menu">
    <div class="package">
        <div class="package-title"><a href="/manual/index.html" class="package-title">DutchPIPE Manual</a></div><br />
                    <b>Chapters</b><br />
                            <a href="../DutchPIPE/tutorial_DutchPIPE.pkg.html">Introduction</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_requirements.pkg.html">Installation - Requirements</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_installnix.pkg.html">Installation - *NIX</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_installwin.pkg.html">Installation - Windows</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_objectworld.pkg.html">A world populated with objects</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_innerworkings.pkg.html">Inner workings of DutchPIPE</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_concepts.pkg.html">Important Concepts</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_jargon.pkg.html">DutchPIPE Jargon</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_messagesystem.pkg.html">Message system</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_translations.pkg.html">Translations</a>
<br clear="all" />

                            <a href="../DutchPIPE/tutorial_issues.pkg.html">DutchPIPE Issues</a>
<br clear="all" />

            <br />
                                    <b>Class Tutorials</b><br />
                            <a href="../DutchPIPE/DpUniverse/tutorial_DpUniverse.cls.html">DpUniverse</a>
<br clear="all" />

                            <a href="../DutchPIPE/DpPage/tutorial_DpPage.cls.html">DpPage</a>
<br clear="all" />

                            <a href="../DutchPIPE/DpObject/tutorial_DpObject.cls.html">DpObject</a>
<br clear="all" />

                            <a href="../DutchPIPE/DpNpc/tutorial_DpNpc.cls.html">DpNpc</a>
<br clear="all" />

            <br />
            </div>
                        <b>File/Class Source Reference</b><br />
        <div class="package">
	config<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/config/_config---dpserver-ini.php.html">dpserver-ini.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/config/_config---dpuniverse-ini.php.html">dpuniverse-ini.php</a>        </div>
	  </div>
  <div class="package">
	dpuniverse_include<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_include/_dpuniverse---include---actions.php.html">actions.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_include/_dpuniverse---include---events.php.html">events.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_include/_dpuniverse---include---move.php.html">move.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_include/_dpuniverse---include---title_types.php.html">title_types.php</a>        </div>
	  </div>
  <div class="package">
	dpuniverse_npc<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_npc/_dpuniverse---npc---barkeeper.php.html">barkeeper.php</a>:             <a href="../DutchPIPE/dpuniverse_npc/Barkeeper.html">Barkeeper</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_npc/_dpuniverse---npc---mobile.php.html">mobile.php</a>:             <a href="../DutchPIPE/dpuniverse_npc/Mobile.html">Mobile</a>                </div>
	  </div>
  <div class="package">
	dpuniverse_obj<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_obj/_dpuniverse---obj---note.php.html">note.php</a>:             <a href="../DutchPIPE/dpuniverse_obj/Note.html">Note</a>                </div>
	  </div>
  <div class="package">
	dpuniverse_page<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_page/_dpuniverse---page---index.php.html">index.php</a>:             <a href="../DutchPIPE/dpuniverse_page/Index.html">Index</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_page/_dpuniverse---page---login.php.html">login.php</a>:             <a href="../DutchPIPE/dpuniverse_page/Login.html">Login</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_page/_dpuniverse---page---manual.php.html">manual.php</a>:             <a href="../DutchPIPE/dpuniverse_page/Manual.html">Manual</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_page/_dpuniverse---page---test1.php.html">test1.php</a>:             <a href="../DutchPIPE/dpuniverse_page/Test1.html">Test1</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_page/_dpuniverse---page---test2.php.html">test2.php</a>:             <a href="../DutchPIPE/dpuniverse_page/Test2.html">Test2</a>                </div>
	  </div>
  <div class="package">
	dpuniverse_std<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpDrink.php.html">DpDrink.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpDrink.html">DpDrink</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpLiving.php.html">DpLiving.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpLiving.html">DpLiving</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpNpc.php.html">DpNpc.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpNpc.html">DpNpc</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpObject.php.html">DpObject.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpObject.html">DpObject</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpPage.php.html">DpPage.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpPage.html">DpPage</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/dpuniverse_std/_dpuniverse---std---DpUser.php.html">DpUser.php</a>:             <a href="../DutchPIPE/dpuniverse_std/DpUser.html">DpUser</a>                </div>
	  </div>
  <div class="package">
	lib<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dpclient.php.html">dpclient.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dpcurrentrequest.php.html">dpcurrentrequest.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dpfunctions.php.html">dpfunctions.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dpserver.php.html">dpserver.php</a>:             <a href="../DutchPIPE/lib/DpServer.html">DpServer</a>                </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dptext.php.html">dptext.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/lib/_lib---dpuniverse.php.html">dpuniverse.php</a>:             <a href="../DutchPIPE/lib/DpUniverse.html">DpUniverse</a>                </div>
	  </div>
  <div class="package">
	public<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/public/_public---dpcaptcha.php.html">dpcaptcha.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/public/_public---dpclient-js.php.html">dpclient-js.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/public/_public---dpclient.php.html">dpclient.php</a>        </div>
	  </div>
  <div class="package">
	script<br />	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/script/_script---make_captcha.php.html">make_captcha.php</a>        </div>
	    <div style="padding-left: 1em;">		<a href="../DutchPIPE/script/_script---start_dpserver.php.html">start_dpserver.php</a>        </div>
	  </div>
            <br />
            <br />
              <div class="package">
                    <a href="../ric_INSTALL.html">INSTALL</a>&nbsp;|
                    <a href="../ric_LICENSE.html">LICENSE</a>&nbsp;|
                    <a href="../ric_README.html">README</a>&nbsp;|
                    <a href="../todolist.html">Todo List</a>&nbsp;|
        <a href="../classtrees_DutchPIPE.html">Class Tree</a>&nbsp;|
        <a href="../elementindex_DutchPIPE.html">Index</a>
        </div>
    </td>
    <td>
      <table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">
<span id="gototop" style="position:absolute;z-index:100"><a href="javascript:window.scrollTo(0,0)"><img id="buttop" src="/images/top.gif" width="11" height="11" border="0" alt="Go to Top" title="Go to Top" /></a></span>
<script src="/jumptop.js"></script>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="bottom"><img src="/images/arrl.gif" width="6" height="11" border="0" alt=" &gt; " align="absmiddle" class="arr" /><a href="../DutchPIPE/tutorial_jargon.pkg.html">DutchPIPE Jargon</a></td>
<td width="34%" align="center" valign="bottom">&nbsp;</td>
<td width="33%" align="right" valign="bottom" style="text-align: right"><a href="../DutchPIPE/tutorial_translations.pkg.html">Translations</a><img src="/images/arr3.gif" width="6" height="11" border="0" alt=" &gt; " align="absmiddle" class="arrr" /></td>
</tr>
</table>
<div><a name=""></a><div class="ref-title-box">Message system<h1 class="ref-title">Message system</h1>
        <h2 class="ref-purpose">COMMUNICATIONS TO OBJECTS, THE <code>tell</code> METHOD</h2></div>
    
<img src="/images/block.gif" width="7" height="11" border="0" alt=" &gt; " align="absmiddle" class="block" /><a href="../DutchPIPE/tutorial_messagesystem.pkg.html#introduction">Introduction</a><br />

<img src="/images/block.gif" width="7" height="11" border="0" alt=" &gt; " align="absmiddle" class="block" /><a href="../DutchPIPE/tutorial_messagesystem.pkg.html#introduction">The tell method</a><br />

<img src="/images/block.gif" width="7" height="11" border="0" alt=" &gt; " align="absmiddle" class="block" /><a href="../DutchPIPE/tutorial_messagesystem.pkg.html#data">The $data to communicate</a><br />

<img src="/images/block.gif" width="7" height="11" border="0" alt=" &gt; " align="absmiddle" class="block" /><a href="../DutchPIPE/tutorial_messagesystem.pkg.html#cdata">CDATA/innerHTML</a><br />

<img src="/images/block.gif" width="7" height="11" border="0" alt=" &gt; " align="absmiddle" class="block" /><a href="../DutchPIPE/tutorial_messagesystem.pkg.html#cdata">Behind the scenes</a><br />
<br />

    <span><a name="introduction"></a><h2 class="title"><b>Introduction</b></h2><p>The DutchPIPE message system is responsible for all communications
            to objects. These are not limited to users, you can communicate to
            all objects, such as NPCs or pages. Also, it is not limited to text
            communication, it takes care of all communications such as
            requesting complete pages or sending the XHTML to add an avatar to a
            page when someone else enters the page a user is on.</p>
        <p>If the object is a user object, it will send messages and HTML to
            represent objects, windows and the like to the user's browser. NPCs
            and other objects will not react to messages by default, but can be
            made to do so.</p></span>
    <span><a name="introduction"></a><h2 class="title"><b>The <code>tell</code> method</b></h2><p>The message system is centered around the following method which can
            be called in all objects in your universe:</p>
        <ol class="src-bg"><li class="src-li"><div class="src-line"><span class="src-key">function&nbsp;</span><span class="src-id">tell</span><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">)</span></div></li>
</ol>
        <p>When called with a string with data, it will communicate the string
            as a &quot;message&quot; to the object it was called in:</p>
        <ol class="src-bg"><li class="src-li"><div class="src-line"><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">tell</span><span class="src-sym">(</span><span class="src-str">'You&nbsp;drink&nbsp;the&nbsp;beer.'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol>
        <p>When called in pages, it will communicate the message to all objects
            in that page. In this case, one or more extra parameters can be
            given to skip:</p>
        <ol class="src-bg"><li class="src-li"><div class="src-line"><span class="src-key">function&nbsp;</span><span class="src-id">tell</span><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">,&nbsp;</span><span class="src-sym">&amp;</span><span class="src-var">$from</span><span class="src-sym">,&nbsp;</span>...<span class="src-sym">)</span></div></li>
</ol>
        <p>This is used to skip the source of the message, so:</p>
        <ol class="src-bg"><li class="src-li"><div class="src-line"><span class="src-var">$page</span><span class="src-sym">-&gt;</span><span class="src-id">tell</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getTitle</span><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span>.&nbsp;<span class="src-str">'&nbsp;drinks&nbsp;the&nbsp;beer'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$user</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol>
        <p>will communicate that someone is drinking a beer to all objects on
            the same page, except the user itself, who gets a custom message.</p></span>
    <span><a name="data"></a><h2 class="title"><b>The <code>$data</code> to communicate</b></h2><p>So far, we have only seen text messages being communicated. For
            users, these messages will appear in the text message area in their
            browsers.</p>
        <p>However, the <code>$data</code> string uses the following XML format
            to communicate (other) types of messages:</p>
        <ul class="var-list"><li class="term"><code>&lt;message&gt;data&lt;/message&gt;</code></li>
                <li><p>The default when the string isn't surrounded by tags.
                        Transmits data to the text message area.</p></li>
            <li class="term"><code>&lt;window&gt;data&lt;/window&gt;</code></li>
                <li><p>Creates a yellow window with data as content. The window
                        tag can have these attributes:</p>
                    <ul class="var-list"><li class="term"><code>autoclose=&quot;<span>miliseconds</span>&quot;</code></li>
                            <li><p>When not given, the window has a 'close' link.
                                    With this argument given, it will automatically
                                    close in the given number of miliseconds.</p></li>
                        <li class="term"><code>styleclass=&quot;cssclass&quot;</code></li>
                            <li><p>Used to create a different window than the
                                    default yellow one.</p></li></ul>
                    <p>An example which is used for drinking beer:</p>
                    <ol class="src-bg"><li class="src-li"><div class="src-line"><span class="src-var">$env</span><span class="src-sym">-&gt;</span><span class="src-id">tell</span><span class="src-sym">(</span><span class="src-str">'&lt;window&nbsp;autoclose=&quot;2500&quot;&nbsp;styleclass=&quot;dpwindow_drink&quot;&gt;'</span></div></li>
<li class="src-li"><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;<span class="src-str">'&lt;h1&gt;'&nbsp;</span>.&nbsp;<a href="../DutchPIPE/lib/_lib---dptext.php.html#functiondptext">dptext</a><span class="src-sym">(</span><span class="src-str">'BUUUUUUUUUUUUUURRRP!'</span><span class="src-sym">)&nbsp;</span>.&nbsp;<span class="src-str">'&lt;/h1&gt;&lt;/window&gt;'</span><span class="src-sym">,</span></div></li>
<li class="src-li"><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$user</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol></li></ul>
        <p>The following types are used by the DutchPIPE system and you
            probably don't need to use them directly:</p>
        <ul class="var-list"><li class="term"><code>&lt;div id=&quot;DOMelementid&quot;&gt;content&lt;/div&gt;</code></li>
                <li><p>Adds a div element to the DOM of the user, removes any
                        existing ones with the same id.</p></li>
            <li class="term"><code>&lt;location&gt;url&lt;/location&gt;</code></li>
                <li><p>Moves an object to another location. This can be used to
                        move users to another page.</p></li>
            <li class="term"><code>&lt;addDpElement&gt;</code>,
                    <code>&lt;moveDpElement&gt;</code>,
                    <code>&lt;changeDpElement&gt;</code>,
                    <code>&lt;removeDpElement&gt;</code></li>
                <li><p>Used by <a href="../DutchPIPE/dpuniverse_std/DpObject.html#methodmoveDpObject">DpObject::moveDpObject()</a> to handle
                        graphical object elements.</p></li></ul></span>
    <span><a name="cdata"></a><h2 class="title"><b>CDATA/innerHTML</b></h2><p>Note that currently all message data is automatically wrapped in a
            <code>&lt;![CDATA[ ]]&gt;</code> construct. So:</p>
        <p><code>&lt;message&gt;hello world&lt;/message&gt;</code></p>
        <p>will automatically be turned into and communicated as:</p>
        <p><code>&lt;message&gt;&lt;![CDATA[hello world]]&gt;&lt;/message&gt;</code></p>
        <p>This is done because otherwise the data must always be valid XHTML
            to be parsed by the XML parser. For instance, for messages by users
            this is absolutely necessary. At the client side, innerHTML is used
            to add content.</p>
        <p>Although this is &quot;handy&quot;, this was the quick and lazy and not the
            clean or advanced solution. The option to not do that for certain
            things (such as the XHTML of pages) and operate in a cleaner way
            with the DOM will be added in the future, allowing more trustworthy
            DOMs in the browser.</p>
        <p>In other words, it's rather lame for DutchPIPE to only do
            DHTML/innerHTML and not proper DOM manipulations. We'll try to do
            better.</p>
        <p>For more info, do for example a Google search on &quot;innerhtml vs dom&quot;.</p></span>
    <span><a name="cdata"></a><h2 class="title"><b>Behind the scenes</b></h2><p>For the browser, there are two ways to obtain data:</p>
        <ul><li>Through a page request</li>
            <li>Using AJAX</li></ul>
        <p>Also, there are two ways data is communicated to the browser:</p>
        <ul><li>Directly because of a user action (page request or performing an
                action)</li>
            <li>Indirectly (for example, someone else says something)</li></ul>
        <p>A user is not permanently connected to a DutchPIPE site. The user
            requests a page, and the HTTP connection is broken. Then every two
            seconds, the user will request updates, and get disconnected every
            time.</p>
        <p>If an external event causes a message to be generated for a user, it
            can't be directly communicated to the user's browser because of
            that. Messages will be put in a queue, and are communicated during
            the next page or AJAX request.</p>
        <p>When a user requests a full page (he clicks a link for example), not
            only the page content but also all waiting messages (text messages,
            windows, moved or changed objects) are included in the XHTML. There
            is no need to obtain those separately with AJAX.</p>
        <p>When an AJAX check is performed and waiting messages are obtained,
            the Javascript in the browser will insert, update or delete text and
            elements on the fly.</p></span></div>
<br clear="all" />
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><img src="/images/arrl.gif" width="6" height="11" border="0" alt=" &gt; " align="absmiddle" class="arr" /><a href="../DutchPIPE/tutorial_jargon.pkg.html">DutchPIPE Jargon</a></td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top" style="text-align: right"><a href="../DutchPIPE/tutorial_translations.pkg.html">Translations</a><img src="/images/arr3.gif" width="6" height="11" border="0" alt=" &gt; " align="absmiddle" class="arrr" /></td>
</tr>
</table>
        <div class="credit">
		    <hr class="separator" />
		    Documentation generated on Sun, 13 Aug 2006 20:42:22 +0200 by <a href="http://www.phpdoc.org">phpDocumentor 1.3.0RC6</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>
